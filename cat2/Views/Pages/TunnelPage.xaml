<Page x:Class="CAT2.Views.Pages.TunnelPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
      xmlns:viewModels="clr-namespace:CAT2.ViewModels">

    <Page.DataContext>
        <viewModels:TunnelPageViewModel />
    </Page.DataContext>

    <Page.Resources>
        <DataTemplate x:Key="ListViewItemTemplate">
            <ui:Card>
                <Grid>
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Left"
                                Orientation="Horizontal">
                        <ui:TextBlock FontSize="18"
                                      FontWeight="Bold"
                                      Text="{Binding Name}" />

                        <ui:TextBlock FontSize="14"
                                      Foreground="Gray"
                                      Text="{Binding Id}" />

                        <ui:TextBlock FontSize="16"
                                      Margin="10,0,0,0"
                                      Text="{Binding Info}" />
                    </StackPanel>

                    <ui:ToggleSwitch HorizontalAlignment="Right"
                                     VerticalAlignment="Top"
                                     Margin="0,0,15,0"
                                     Tag="{Binding Name}"
                                     IsChecked="{Binding IsTunnelStarted}"
                                     Command="{Binding TunnelCommand}"
                                     IsEnabled="{Binding IsEnabled}"
                                     OffContent="启动"
                                     OnContent="关闭" />
                </Grid>
            </ui:Card>
        </DataTemplate>
    </Page.Resources>

    <Grid>
        <TabControl>
            <TabItem IsSelected="True">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <ui:SymbolIcon Margin="0,0,6,0" Symbol="TagMultiple24" />
                        <TextBlock Text="全部" />
                    </StackPanel>
                </TabItem.Header>

                <ui:ListView Margin="0,10,0,10"
                             Visibility="{Binding CardVisibility}"
                             ItemsSource="{Binding ListDataContext,Mode=TwoWay}"
                             ItemTemplate="{StaticResource ListViewItemTemplate}" />

            </TabItem>

            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <ui:SymbolIcon Margin="0,0,6,0" Symbol="TagLock24" />
                        <TextBlock Text="VIP" />
                    </StackPanel>
                </TabItem.Header>

                <ui:ListView Margin="0,10,0,10"
                             Visibility="{Binding CardVisibility}"
                             ItemsSource="{Binding Viplist,Mode=TwoWay}"
                             ItemTemplate="{StaticResource ListViewItemTemplate}" />
            </TabItem>

            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <ui:SymbolIcon Margin="0,0,6,0" Symbol="TagError24" />
                        <TextBlock Text="掉线" />
                    </StackPanel>
                </TabItem.Header>

                <ui:ListView Margin="0,10,0,10"
                             Visibility="{Binding CardVisibility}"
                             ItemsSource="{Binding Offlinelist,Mode=TwoWay}"
                             ItemTemplate="{StaticResource ListViewItemTemplate}" />
            </TabItem>
        </TabControl>

        <ui:ProgressRing IsIndeterminate="True" Visibility="{Binding RingVisibility,Mode=TwoWay}" />
    </Grid>
</Page>